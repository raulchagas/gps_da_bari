<div class="container">
<h1> <%= days %></h1>
  <% @created = @vitamins %>
  <% if @created.empty? %>
    Did you take your vitamin today?
    <%= simple_form_for @vitamin do |f| %>
      <%= f.input :date, as: :date %>
      <%# <%Não aceita sem colocar a data, mesmo passando no controller%>
      <%= f.submit "Yes!" %>
    <% end %>
    Streak = 0


  <% else %>
    <% if @created.last.date.to_date == Date.today%>
      <% @day = Date.today %>
      You already took your vitamin today!

    <% else %>
      Did you take your vitamin today?
      <%= simple_form_for @vitamin do |f| %>
        <%= f.input :date, as: :date %>
        <%# <%Não aceita sem colocar a data, mesmo passando no controller%>
        <%= f.submit "Yes!" %>
      <% end %>
      <% @day = Date.today %>
    <% end %>
    <% @streak = 0 %>
    <% @created = @created.to_a %>
    <% while (@created.pop().date.to_date == @day) do %>
      <%  %>
      <% if @created != Date.today %>
      <% @streak += 1 %>
      <% end %>
      <% @day = @day %>
      <% break if @created.empty? %>
    <% end %>
    <p>Vitamin streak: <%= @streak %></p>


  <% end %>
  <% @taken = [] %>
  <% @vitamins.each do |vitamin|%>
    <% @taken << vitamin.date %>
  <% end %>
  <div class="calendar">
    <%= month_calendar do |date| %>
      <% if @taken.include?(date) %>
        <div class="blue"><%= date.day %></div>
      <% else %>
        <%= date.day %>
      <% end %>
    <% end %>
  </div>


</div>
