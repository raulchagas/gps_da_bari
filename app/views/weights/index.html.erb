<div class="container weight-container">
  <div class="grid-2-1 green-shadow-l px-3 rounded-l">

      <%= simple_form_for @weight, :html => {class: 'form-inline p-3 mb-3' } do |f| %>
        <div><%= f.input :value,  label: 'add weight' %></div>
        <div style="width:fit-content; background-color: #A4C3B2;"><%= f.submit "Add" %></div>
      <% end %>

    <div class="d-flex both-margin-separator fs-normal p-3 mb-3">
      <div class="recipe-factors mx-3" style="text-align: center;">
        <span class="mb-0">
          <%= @weights.first.value %>
        </span><br>
         <span class="secondary-text mt-0">INITIAL</span>
      </div>

      <div class="recipe-factors mx-4" style="text-align: center;">
        <span class="mb-0">
          <%= @weights.last.value %>
        </span><br>
         <span class="secondary-text mt-0">CURRENT</span>
      </div>

      <div class="recipe-factors mx-3" style="text-align: center;">
        <span class="mb-0">
          <%= (@weights.last.value - @weights.first.value) %>
        </span><br>
         <span class="secondary-text mt-0">CHANGE</span>
      </div>

    </div>

  </div>

  <div class="green-shadow-l px-3 rounded-l">
    <% @weigts_values = []%>
    <% @weights.each do |weight| %>
      <% @weigts_values << weight.value %>
      <% @weigts_values.min %>
    <% end %>

    <div>
      <%= form_with url: weights_path, method: :get, class:"align-center text-muted small d-flex pt-2 justify-content-around" do |form| %>
        <div>
          <%= form.label :start_date, "From " %>
          <%= form.date_field :start_date, value: params[:start_date], class:"me-4 text-muted mb-2", style:"width: 80px; align-self: end;" %>
        </div>
        <div>
          <%= form.label :end_date, "To " %>
          <%= form.date_field :end_date, value: params[:end_date], class:"me-4 text-muted mb-2", style:"width: 80px; align-self: end;" %>
        </div>
        <%= form.button :submit, class:"color-green" do %>
          <i class="fa-solid fa-filter"></i>
        <% end %>
      <% end %>
    </div>

    <%= line_chart Weight.pluck(:date, :value), min: (@weigts_values.min * 0.9), colors: ["#657c6a", "#666"], xmin: params[:start_date], xmax: params[:end_date] %>
  </div>

 </div>
